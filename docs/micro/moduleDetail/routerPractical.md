# 路由实用篇

当前篇幅为路由的具体使用，在阅读本篇之前，最好已经大致阅读过[概念篇](./routerConcept.md)

请确保知道下列名词：

* 路由模式
    - 静态路由
    - 动态路由
* 公共路由
* 业务路由
* 路由配置对象

## 更改路由模式

路由模式的配置是由[环境变量](../environmentVar.md)决定的

微应用的路由模式是由基座应用传递的，也就是说，路由模式是由基座应用决定的，目的是为了统一 基座和微应用的 路由模式

配置：

在基座应用的 `/.env` 或 `/.env.local` 中，配置 `VUE_APP_ROUTE_MODE` 字段

```zsh
# 路由配置方式（后端 | 前端）"backEnd" | "frontEnd"
VUE_APP_ROUTE_MODE=frontEnd
```

:::tip

在生产的环境变量中 `/.env.production` 将路由模式设置成了 'backEnd'

:::

## 静态路由注册

详情请参考 [快速开始](../quickStart.md)

## 动态路由注册

动态路由注册是在统一管理平台下的 “应用管理>应用功能” 模块中操作的

应用模块是维护整个系统所有应用（基座应用+微应用）的路由的模块，其数据是一个多根树

数据结构与路由[配置对象](./routerConcept.md#配置对象)有出入，但框架内部抹平了差异

如图所示：

![应用功能模块](/images/realize/应用功能模块.png)

### 新增路由

#### 一级菜单

点击新增或点击应用（高亮黄底的行）的添加下级按钮

![一级菜单](/images/realize/一级菜单.png)

#### 二级菜单

![二级菜单](/images/realize/二级菜单.png)

:::tip

一级菜单和二级菜单对于前端注册路由来说，是没有区别的，数据结构是一样的，区别是业务上的区别

至于框架是如何将应用功能转换成路由的，请参考概念篇及源码，这里不做讨论

:::

#### 配置项

一些配置项属于附加信息，将会被注入到路由的[元信息中](./routerConcept.md#路由元信息)，要获取这些配置数据，请访问 `route.meta.xxx`

* 功能名称
    > 菜单名称，将注入到 `meta.title`

* 前端组件
    > 如果填写了，会基于填写的路径提取路径及加载组件，填写规则请参考页面提示

* 图标
    > 菜单的图标，将注入到 `meta.icon`

* 排序
    > 后台数据排序

* 是否路由功能
    > 暂无实际使用字段

* 打开方式
    > 参考页面提示信息

* 隐藏路由
    > 参考页面提示信息

* 聚合路由
    > 暂无实际使用字段

* 是否缓存路由
    > keep-alive 标识字段，暂无实现

* 是否模糊匹配
    > 标识路由模糊匹配，内部将把路由的 path 处理成 `path/:page*` ，用于嵌套应用路由的配置
