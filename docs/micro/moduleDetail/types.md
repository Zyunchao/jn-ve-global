# 系统类型

整个系统，我们自己编写的类型都是集中存放在 '/src/@types' 下面的

:::tip
默认所有可见的"@types"包会在编译过程中被包含进来。 node_modules/@types文件夹下以及它们子文件夹下的所有包都是可见的； 
:::

本身，所有以 @types 命名的文件夹，都会被 ts 所加载，我们可以写一些声明文件（.d.ts）为编译器提供自定义的类型提示（[参考 tsconfig 配置](https://www.tslang.cn/docs/handbook/tsconfig-json.html)）

实际项目中存放的多是模块的自定义声明类型（interface），实体类等

:::tip

@types 下是用来存放整个系统的定义类型的，不局限于实体类

:::

## 实体类：面向接口（interface）开发

在以往的 js 开发中，我们前端并没有 接口、class 等的限制，或许大多数前端并没有 "面向接口（interface）编程" 的这样一个概念

得益于 TS 的 "声明（比如变量，函数，类，类型别名或接口）" 可以更好的限制我们的对象的使用。

因此，我在框架中引入了 “实体类” 的概念。

就像后台的实体类一样，后台实体类用来构造一个对象，基于这个实体类，进行数据的增删改查，我们前端也是如此，基于 “实体类” 进行增删改查（发送请求、获取数据等等）

### 场景

试想一下，我们现在在开发一个用户管理模块，我们之前（js）的开发在进行调试接口的时候，请求回来的数据（对象）都包含哪些字段，以及字段是什么含义，我们一般来说是不太清楚的；

是因为我们前端一般都不会直接去接触库表，不像后台那样基于表去开发，我们多是基于接口（后台 api）进行开发；

这是否成为了你之前的一个开发痛点，那么多字段，每次去做数据操作的时候，都要去问后台或查接口文档，看这个字段什么意思，我应该去操作哪个字段；

这样一来二去，或许你熟悉了某个模块后，对字段都了解了，但是你能保证后续的维护工作中都能够记得吗，肯定是不能的，到时候又要去翻接口文档，找后台人员，但是你还知道这个接口是哪个后台写的吗。

这样来来回回的沟通，扯皮，每个人都心力憔悴。

如果你被这种场景困扰过，请认真并合理的使用 <strong style="color: #ff3040; ">“实体类”</strong>

:::danger

在以往（目前大家所使用的 vite 单页面框架）的开发中，可能大部分开发并没有真正理解前端实体类的概念，并且存在一个不好的现象：全是复制粘贴的 uums 的代码，也没有去管实体类的改变，导致所有的模块的实体类都是使用的 App，请各位去自己的代码中寻找，看看是否都是 App，你是否了解过这个 App 是什么含义；

我添加实体类概念的初衷是希望能使前端开发形成相对独立的库表概念，及各种实体类的关联关系，帮助开发快速接入模块，帮助前后台更好的沟通；

希望开发能够基于实体类编写出独立、关联、易读的代码，如果没有正确（所有的模块都是 App）使用实体类，那将毫无意义

:::

### 概念与实际

实体类，他并不是一个 `class` ， 由于前端的对象构造方式有多种（构造函数、字面量等），我们在实际的开发中，构建一个对象多是使用字面量的形式；

因此，实体类的概念实际上就是 “用接口 (interface) 去限制对象”，以让我们一眼看过去，就知道这个对象里面拥有哪些字段，以及与哪个实体类相关联，更像是具象化的业务节点；

并且在我们限制一个对象的类型后，我们在操作这个对象时，编辑器会友好的为我们提示这个对象下的字段，使我们查找字段更容易。

简而言之：<strong style="color: #ff3040; ">实体类就是一个接口 (interface) ，用来限制对象，并且结合编辑器添加提示，且能够让我们的代码更容易阅读；</strong>

### 实体类具体开发步骤

1. 在 `/src/@types/entity` 目录下新建自定义命名的 .ts 文件，如：`AppFunc.ts`
    > 具体的命名需要具有语义化，尽量与后台的对应模块的实体类相对应；<br/>
    > 因为是类型文件，要以大驼峰规则命名；<br/>
    > 希望各位开发审视自身代码，查看自己模块 :App 类型的使用，它代表的不是广泛的应用系统，它代表的是 uums 下的应用管理模块的实体类

2. 接口的定义也是模块化的，内部遵循 es6 的模块化
    > import 引入实体类使用；<br/>
    > export 到处实体类；

3. 模块内容部分为抛出一个接口，这个接口下的字段对应后台表中的字段
    > 每个字段都应该添加文档注释，这样在使用的过程中，编辑器才能给出中文提示；<br/>
    > 在后台修改表中字段时，应同步及时更新实体类中的字段

```ts
// AppFunc.ts
export default interface AppFunc {
    /**
     * 应用编号
     */
    appId: App['id']
    /**
     * 应用名称
     */
    appName: string
    /**
     * 按钮权限状态
     */
    btnStatus: BtnStatus
    /**
     * 前端组件
     */
    component: string
    /**
     * 前端组件name
     */
    componentName: string
}
```

4. 使用：在具体的模块（任何 \*.vue/\*.ts/\*.tsx）中，import 引入

```ts
import AppFunc from '@/@types/entity/AppFunc'

const obj: AppFunc = {

}

```

## 基座应用 & 微应用

基座应用中的所有实体类都存在于 微应用中的 `/src/@types/entity/root` 中，因为 uums 的一些实体类可能是其他业务模块需要用到的，如：用户、机构、角色等

## 寄语

希望每个前端开发都要学会正确的使用实体类，使用实体类可以有效的避免和后台产生的扯皮问题，如修改表中字段等。
